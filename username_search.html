<html>
<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>

  <div class="container">
      <fieldset>
        <legend>Username Search</legend>
        <input type="text" class="form-control" id="usernameSearch" placeholder="Insert Username"/>
      </fieldset>
    <br>
    <button type="submit" id="search" class="btn">Search Username</button>
    <br>
    <table class="table table-bordered table-hover" id="usernamelist">
    </table>
  </div>
</body>
</html>

<!--TODO: Search functionality
          Implement buttons that send seed data to maze generation.-->

<script>
$("#search").click(function(){
  let i;
  let storage
  let searchedName=document.getElementById("usernameSearch").value
  let returnedUsernames = []
  if (localStorage.getItem('usernames')) {
    storage = JSON.parse(localStorage.getItem('usernames'))

    for (i = 0; i < storage.usernames.length; i++) {
      let testname = storage.usernames[i].name
      if (testname  === searchedName) {
        returnedUsernames.push(storage.usernames[i])
      }
    }
    if (returnedUsernames.length != 0) {
      let table = '';
      const rows = returnedUsernames.length;
      table += '<tr><td>Name</td><td>Difficulty</td><td>Time</td></tr>'
      for (i = 0; i < rows; i++) {
        table += '<tr><td>' + returnedUsernames[i].name + '</td><td>' + returnedUsernames[i].difficulty + '</td><td>' + returnedUsernames[i].time + '</td><td>' + '<button>Select</button>' + '</td></tr>';

      }
      document.getElementById('usernamelist').innerHTML = table;
    }
    else {
      alert("No Matched Usernames");
    }
  }
else {
    alert("No stored usernames");
  }
})


</script>
