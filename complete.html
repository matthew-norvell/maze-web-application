<html>
<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
<div class="page-header" align="center">
  Maze Complete
</div>

  <div class="container">
    <fieldset>
      <legend>Insert Username</legend>
      <input type="text" class="form-control" name="username" id="username">
    </fieldset>
    <br>

    <button type="button" id="insert" class="btn btn-success">Insert</button>

    <a href="index.html"><button type="button" class="btn">Return to main page</button></a>

  </div>

  <script>

  </script>
</body>
</html>

<!--TODO: Implement logic to receive data from maze page.-->
<script>

  // const placeHolderSeed = "12345";
  // const placeHolderTime = "3:45";
  // const placeHolderDifficulty = "hard"
  // sessionStorage.setItem('seed', placeHolderSeed)
  // sessionStorage.setItem('time', placeHolderTime)
  // sessionStorage.setItem('difficulty', placeHolderDifficulty)

  $("#insert").click(function (){
    let storage
    if (localStorage.getItem('usernames')){
      storage = JSON.parse(localStorage.getItem('usernames'))
    }
    else {
      storage = {
        usernames: []
      };
    }
    let username = {
      name: document.getElementById("username").value,
      seed: sessionStorage.getItem('seed'),
      time: sessionStorage.getItem('time'),
      difficulty: sessionStorage.getItem('difficulty')
    };

    storage.usernames.push(username)

    alert(JSON.stringify(storage))

    localStorage.setItem('usernames', JSON.stringify(storage))
    alert("stored string")

    sessionStorage.removeItem('seed')
    sessionStorage.removeItem('time')
    sessionStorage.removeItem('difficulty')
  })

</script>
